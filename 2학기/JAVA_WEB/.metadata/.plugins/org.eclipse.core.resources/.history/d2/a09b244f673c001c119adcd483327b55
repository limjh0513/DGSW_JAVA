
$(document).ready(function() {
	initEventHandlers();
	
	readList(function(list){
		showList(list);
	})
}); 


function initEventHandlers() {
	$("#btn_register").on("click", function() {
		openRegisterPopup();
	});
	
	$(".registerLayer #btn_close").on("click", function() {
		$(".registerLayer").hide();
	});
	
	$(".registerLayer #btn_save").on("click", function() {
		doRegister();
	});
}

function openRegisterPopup() {
	$(".registerLayer").show();
	
	$(".registerLayer [name='name']").val("");
	$(".registerLayer [name='phoneNumber']").val("");
}

function doRegister() {
	var param = {
		name: $(".registerLayer [name='name']").val(),
		phoneNumber: $(".registerLayer [name='phoneNumber']").val()
	}
	console.log("doRegister", param);
	
	$.post("register.do", param, function(response) {
		console.log(response);
		if (response.resultCode == "Success") {
			$(".registerLayer").hide();
			
			// TODO list 갱신
		} else {
			alert("등록에 실패했습니다. " + response.resultMessage);
		}
	});
}

function readList(callback){
	$.get("list.do", null, function(response)){
		if (response.resultCode == "Success") {
			callback(response.data);
			// TODO list 갱신
		} else {
			alert("서버에서 값을 읽어 올 수 없습니다. " + response.resultMessage);
		}
	}
}

function showList(list){
	for(var i in list){
		showLine(list[i]);
	}
}

function showLine(data){
	var tr = $("<tr/>");
	
	var checkbox = $("<td><input type="checkbox" )
}